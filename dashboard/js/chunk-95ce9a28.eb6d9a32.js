(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95ce9a28"],{"06fc":function(e,t,n){e.exports={menuBg:"#304156",menuText:"#bfcbd9",menuActiveText:"#409EFF"}},"10c1":function(e,t,n){e.exports={menuBg:"#304156",menuText:"#bfcbd9",menuActiveText:"#409EFF"}},2366:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function a(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}e.exports=a},"3fd7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"consumers-wrapper"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","show-message":!1}},[n("el-form-item",{attrs:{label:"name",prop:"username"}},[n("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._l(e.form.plugins,function(t,r){return n("el-form-item",{key:r,staticClass:"plugin-item",attrs:{label:"plugin"}},["tempPlugin"!==r?n("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){return e.showPlugin(r)}}},[e._v("\n        "+e._s(r)+"\n      ")]):e._e(),"tempPlugin"===r?n("el-select",{staticClass:"plugin-select",attrs:{value:null,placeholder:"Select a Plugin"},on:{change:e.showPlugin}},e._l(e.filteredPluginList,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1):e._e()],1)}),n("el-form-item",[n("el-button",{attrs:{disabled:!e.filteredPluginList.length},on:{click:e.addPlugin}},[e._v("\n        Add Plugin\n      ")])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        Save\n      ")]),n("el-button",{on:{click:e.toPreviousPage}},[e._v("\n        Cancel\n      ")])],1)],2),n("PluginDialog",{attrs:{show:e.showPluginDialog,name:e.pluginName,"plugin-data":e.form.plugins[e.pluginName]},on:{hidePlugin:function(t){e.showPluginDialog=!1},save:e.onPluginSave}})],1)},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),o=(n("96cf"),n("3b8d")),u=(n("7f7f"),n("d225")),s=n("b0b4"),c=n("308d"),l=n("6bb5"),p=n("4e2b"),m=n("9ab4"),f=n("60a3"),d=n("c738"),h=n("7d98"),g=n("c8f9");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){function t(){var e;return Object(u["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.isEditMode=!1,e.form={username:"",plugins:{}},e.rules={username:{required:!0}},e.pluginList=[],e.pluginName="",e.showPluginDialog=!1,e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){this.isEditMode=-1===this.$route.name.indexOf("Create"),this.isEditMode&&this.getConsumerData(),this.getPluginList()}},{key:"getConsumerData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.username,e.next=3,Object(d["a"])(t);case 3:n=e.sent,this.form={desc:n.node.value.desc,username:t,plugins:n.node.value.plugins};case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPluginList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])();case 2:this.pluginList=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"addPlugin",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.form.plugins.hasOwnProperty("tempPlugin")){e.next=2;break}return e.abrupt("return");case 2:this.form.plugins=v({},this.form.plugins,{tempPlugin:null});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onSubmit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return delete t.form.plugins["tempPlugin"],e.next=4,Object(d["d"])(Object.assign({},t.form));case 4:if(t.$message.success("".concat(t.isEditMode?"Update the":"Create a"," consumer successfully!")),!t.isEditMode){e.next=7;break}return e.abrupt("return");case 7:t.$nextTick(function(){t.form={username:"",plugins:{}}}),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"showPlugin",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.pluginName=t,this.showPluginDialog=!0;case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onPluginSave",value:function(e,t){delete this.form.plugins["tempPlugin"],this.showPluginDialog=!1,this.form.plugins[e]=t}},{key:"toPreviousPage",value:function(){this.$router.go(-1)}},{key:"filteredPluginList",get:function(){var e=this;return this.pluginList.filter(function(t){return!e.form.plugins.hasOwnProperty(t)})}}]),t}(f["c"]);y=m["a"]([Object(f["a"])({name:"ConsumerEdit",components:{PluginDialog:g["a"]}})],y);var O=y,w=O,P=(n("eec9"),n("2877")),j=Object(P["a"])(w,r,a,!1,null,null,null);t["default"]=j.exports},"7d98":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("b32d"),a=function(){return Object(r["a"])({url:"/plugins/list",method:"get"})}},b32d:function(e,t,n){"use strict";var r=n("bc3a"),a=n.n(r),i=n("5c96"),o=n("9dba"),u=a.a.create({baseURL:"http://39.97.63.215:9080/apisix/admin/",timeout:5e3});u.interceptors.request.use(function(e){return o["a"].token&&(e.headers["X-Access-Token"]=o["a"].token),e},function(e){Promise.reject(e)}),u.interceptors.response.use(function(e){var t=e.data;return t.code&&2e4!==t.code?(Object(i["Message"])({message:t.message||"Error",type:"error",duration:5e3}),50008!==t.code&&50012!==t.code&&50014!==t.code||i["MessageBox"].confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){o["a"].ResetToken(),location.reload()}),Promise.reject(new Error(t.message||"Error"))):e.data},function(e){return Object(i["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}),t["a"]=u},c437:function(e,t,n){var r,a,i=n("e1f4"),o=n("2366"),u=0,s=0;function c(e,t,n){var c=t&&n||0,l=t||[];e=e||{};var p=e.node||r,m=void 0!==e.clockseq?e.clockseq:a;if(null==p||null==m){var f=i();null==p&&(p=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==m&&(m=a=16383&(f[6]<<8|f[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:s+1,g=d-u+(h-s)/1e4;if(g<0&&void 0===e.clockseq&&(m=m+1&16383),(g<0||d>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=d,s=h,a=m,d+=122192928e5;var b=(1e4*(268435455&d)+h)%4294967296;l[c++]=b>>>24&255,l[c++]=b>>>16&255,l[c++]=b>>>8&255,l[c++]=255&b;var v=d/4294967296*1e4&268435455;l[c++]=v>>>8&255,l[c++]=255&v,l[c++]=v>>>24&15|16,l[c++]=v>>>16&255,l[c++]=m>>>8|128,l[c++]=255&m;for(var y=0;y<6;++y)l[c+y]=p[y];return t||o(l)}e.exports=c},c738:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return u});var r=n("b32d"),a=function(e){return Object(r["a"])({url:"/consumers",method:"PUT",data:e})},i=function(){return Object(r["a"])({url:"/consumers",method:"GET"})},o=function(e){return Object(r["a"])({url:"/consumers/".concat(e),method:"GET"})},u=function(e){return Object(r["a"])({url:"/consumers/".concat(e),method:"DELETE"})}},c8f9:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugin-dialog"},[n("el-dialog",{attrs:{title:"Plugin "+e.name+" Edit",visible:e.show},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"show-message":!1}},e._l(e.schema.properties,function(t,r){return n("el-form-item",{key:r,attrs:{label:r,"label-width":"160px",prop:r}},["integer"===e.schema.properties[r].type||"number"===e.schema.properties[r].type?n("el-input-number",{attrs:{min:e.schema.properties[r].minimum||-99999999999,max:e.schema.properties[r].maximum||99999999999,label:"描述文字"},on:{change:function(t){return e.onPropertyChange(r,t)}},model:{value:e.data[r],callback:function(t){e.$set(e.data,r,t)},expression:"data[key]"}}):e._e(),e.schema.properties[r].hasOwnProperty("enum")?n("el-select",{attrs:{placeholder:"Select a "+r},on:{change:function(t){return e.onPropertyChange(r,t)}},model:{value:e.data[r],callback:function(t){e.$set(e.data,r,t)},expression:"data[key]"}},e._l(e.schema.properties[r]["enum"],function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1):e._e(),"string"!==e.schema.properties[r].type||e.schema.properties[r].hasOwnProperty("enum")?e._e():n("el-input",{attrs:{placeholder:r},model:{value:e.data[r],callback:function(t){e.$set(e.data,r,t)},expression:"data[key]"}})],1)}),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.onCancel}},[e._v("\n        Cancel\n      ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("\n        Save\n      ")])],1)],1)],1)},a=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("bd86")),o=(n("96cf"),n("3b8d")),u=(n("7f7f"),n("d225")),s=n("b0b4"),c=n("308d"),l=n("6bb5"),p=n("4e2b"),m=n("9ab4"),f=n("60a3"),d=n("b32d"),h=function(e){return Object(d["a"])({url:"/schema/plugins/".concat(e),method:"get"})};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=n("c437"),y=function(e){function t(){var e;return Object(u["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.schema={properties:{}},e.rules={},e.data={},e}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"onShowChange",value:function(e){this.resetPlugin(),e&&this.getschema(this.name)}},{key:"resetPlugin",value:function(){this.schema={properties:{}},this.rules={},this.data={}}},{key:"getschema",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:if(n=e.sent,n.properties){e.next=5;break}return e.abrupt("return");case 5:for(a in this.schema=Object.assign({},b({},n,{name:this.name})),r=Object.assign({},n.properties),r)i=Object.assign({},r[a]),r[a]={trigger:"blur"},n.required&&(r[a].required=n.required.includes(a)),i.hasOwnProperty("type")&&(r[a]["type"]=i["type"]),i.hasOwnProperty("minimum")&&(r[a]["min"]=i["minimum"]),i.hasOwnProperty("maximum")&&(r[a]["max"]=i["maximum"]),i.hasOwnProperty("enum")&&(r[a]["type"]="enum",r[a]["enum"]=i["enum"]);this.rules=r,this.pluginData&&(this.data=Object.assign({},this.pluginData)),"key-auth"!==this.name||this.pluginData||(this.data={key:v()});case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onCancel",value:function(){this.$emit("hidePlugin")}},{key:"onSave",value:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.$emit("save",e.name,e.data)})}},{key:"onPropertyChange",value:function(e,t){this.data[e]=t}}]),t}(f["c"]);m["a"]([Object(f["b"])({default:!1})],y.prototype,"show",void 0),m["a"]([Object(f["b"])({default:""})],y.prototype,"name",void 0),m["a"]([Object(f["b"])({default:null})],y.prototype,"pluginData",void 0),m["a"]([Object(f["d"])("show")],y.prototype,"onShowChange",null),y=m["a"]([Object(f["a"])({name:"PluginDialog"})],y);var O=y,w=O,P=(n("f02e"),n("2877")),j=Object(P["a"])(w,r,a,!1,null,null,null);t["a"]=j.exports},e1f4:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},eec9:function(e,t,n){"use strict";var r=n("10c1"),a=n.n(r);a.a},f02e:function(e,t,n){"use strict";var r=n("06fc"),a=n.n(r);a.a}}]);